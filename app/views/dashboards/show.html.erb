<div class="container text-white">
  <h6><em> My wallet: $<%= current_user.wallet %> </em></h6>
  <br>
  <h5>Pending requests on my sessions</h5>
  <div class="row d-flex align-items-center dashboard-card">
    <% @mysessions.each do |session|%>
      <% if session.user_invites.select{|n| n.status == "Pending" }.first %>
          <div class="col-4">
            <div class="beef-card-avatar-dashboard">
              <%= cl_image_tag session.user_invites.first.user.avatar %>
              <p><%= session.user_invites.first.user.username %></p>
            </div>
          </div>

            <div class="col-2">
                <h5 class="mt-2">  <%= session.price*2 %>$</h5>
                <%= session.user_invites.first.status %>
            </div>

            <div class="col-2">
              <%= link_to "go to game", lobby_session_path(session.lobby, session), class:"d-flex align-items-center justify-content-between" %>
            </div>

            <div class="col-4 justify-content-end">
              <%= link_to 'accept', accept_path(user_invite_id: session.user_invites.first.id, session_id: session.id), method: :patch, class:"d-flex justify-content-end" %>
              <%= link_to 'decline', decline_path(user_invite_id: session.user_invites.first.id, session_id: session.id), method: :patch, class:"d-flex justify-content-end"  %>
            </div>

      <% end %>
    <% end %>
  </div>
  <br>
  <h5>Waiting for opponent to accept my request</h5>
  <div class="row d-flex align-items-center mt-3 dashboard-card">
    <% unless @sessions.nil? %>
    <% @sessions.each do |session|%>
      <div class="col-4">
        <div class="beef-card-avatar-dashboard">
          <%= cl_image_tag session.user.avatar %>
          <p><%= session.user.username %></p>
        </div>
      </div>

      <div class="col-2">
          <h5 class="mt-2">  <%= session.price*2 %>$</h5>
          <%= session.user_invites.first.status %>
      </div>

      <div class="col-2">
        <%= link_to "go to game", lobby_session_path(session.lobby, session), class:"d-flex align-items-center justify-content-between" %>
      </div>

      <div class="col-4 d-flex justify-content-end">
        <% if session.user_invites.first.user == current_user %>
          <%= link_to 'cancel', cancel_path(user_invite_id: session.user_invites.first.id, session_id: session.id), method: :patch  %>
        <% end %>
      </div>
    <% end %>
    <% end %>
  </div>
  <br>
  <h5>My sessions in progress</h5>
    <div class="row d-flex align-items-center mt-3 dashboard-card">
    <% @inprogresssessions.each do |session|%>
      <div class="col-4">
        <div class="beef-card-avatar-dashboard">
            <%= cl_image_tag session.user_invites.first.user.avatar %>
            <p><%= session.user_invites.first.user.username %></p>
        </div>
      </div>
      <div class="col-2">
          <h5 class="mt-2">  <%= session.price*2 %>$</h5>
          <%= session.status %>
      </div>
      <div class="col-2">
        <%= link_to "go to game",lobby_session_path(session.lobby, session), class:"d-flex align-items-center justify-content-between" %>
      </div>
      <div class="col-4 d-flex justify-content-end">
        <% if session.user_invites.first.user == current_user %>
          <%= link_to 'cancel', cancel_path(user_invite_id: session.user_invites.first.id, session_id: session.id), method: :patch  %>
        <% end %>
      </div>
    <% end %>
  </div>

  <br>
  <h5>History of my past sessions</h5>
  <div class="row d-flex align-items-center mt-3 dashboard-card">
    <% @finished_sessions.each do |session|%>
      <div class="col-4">
        <div class="beef-card-avatar-dashboard">
            <%= cl_image_tag session.user_invites.first.user.avatar %>
            <p><%= session.user_invites.first.user.username %></p>
        </div>
      </div>
      <div class="col-2">
          <h5 class="mt-2">  <%= session.price*2 %>$</h5>
          <%= session.status %>
      </div>
      <div class="col-2">
        <%= link_to "go to game",lobby_session_path(session.lobby, session), class:"d-flex align-items-center justify-content-between" %>
      </div>
      <div class="col-4 d-flex justify-content-end">
        <% if session.user_invites.first.user == current_user %>
          <%= link_to 'cancel', cancel_path(user_invite_id: session.user_invites.first.id, session_id: session.id), method: :patch  %>
        <% end %>
      </div>
    <% end %>
  </div>


</div>
